<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calculadoras</title>
  <style>
    :root {
      --primary-bg: #1F1F1F;
      --card-bg: #2B2B2B;
      --input-bg: #3D3D3D;
      --white: rgba(255,255,255,0.9);
      --white2: rgba(255,255,255,0.42);
      --white3: rgba(255,255,255,0.56);
    }
    * { box-sizing: border-box; }
    body {
      font-family: Arial, sans-serif;
      background-color: var(--primary-bg);
      color: var(--white);
      margin: 0;
      padding: 24px 16px 0 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .carousel-controls {
      display: flex;
      justify-content: center;
      gap: 16px;
      margin-bottom: 16px;
      width: 100%;
      max-width: 600px;
    }
    .carousel-control {
      padding: 12px 24px;
      border-radius: 16px;
      background-color: transparent;
      color: var(--white);
      border: 2px solid var(--white2);
      cursor: pointer;
      transition: background-color 0.3s, border-color 0.3s, color 0.3s;
      font-size: 16px;
      width: auto;
    }
    .carousel-control:hover {
      background-color: var(--white2);
      color: var(--primary-bg);
      border-color: var(--white3);
    }
    .carousel-control:focus {
      outline: none;
      background-color: var(--white3);
      color: var(--primary-bg);
      border-color: var(--white3);
    }
    .scroll-container {
      width: 100%;
      max-width: 600px;
      overflow-x: auto;
      overflow-y: hidden;
      padding-bottom: 24px;
      scroll-behavior: smooth;
      display: flex;
      align-items: flex-start;
    }
    .calculators-list {
      display: flex;
      flex-direction: row;
      gap: 32px;
      width: fit-content;
    }
    .calculator {
      background-color: var(--card-bg);
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 0 10px rgba(0,0,0,0.35);
      min-width: 320px;
      max-width: 320px;
      width: 320px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
    }
    label, input, button, select {
      font-size: 16px;
      color: var(--white);
    }
    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 8px;
      margin-bottom: 16px;
      border-radius: 8px;
      border: 2px solid var(--input-bg);
      background-color: var(--input-bg);
      box-sizing: border-box;
    }
    input[type="number"]::-webkit-inner-spin-button,
    input[type="number"]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    input[type="number"] {
      -moz-appearance: textfield;
    }
    button[type="submit"] {
      padding: 12px;
      width: 100%;
      border-radius: 16px;
      background-color: transparent;
      color: var(--white);
      border: 2px solid var(--white2);
      cursor: pointer;
      transition: background-color 0.3s, border-color 0.3s, color 0.3s;
    }
    button[type="submit"]:hover {
      background-color: var(--white2);
      color: var(--primary-bg);
      border-color: var(--white3);
    }
    button[type="submit"]:focus {
      outline: none;
      background-color: var(--white3);
      color: var(--primary-bg);
      border-color: var(--white3);
    }
    .result {
      margin-top: 20px;
      font-weight: bold;
      color: var(--white);
    }
    @media (max-width: 900px) {
      .scroll-container, .carousel-controls {
        max-width: 100vw;
      }
      .calculator {
        min-width: 90vw;
        max-width: 90vw;
        width: 90vw;
      }
    }
  </style>
</head>
<body>
  <div class="carousel-controls">
    <button class="carousel-control prev">Anterior</button>
    <button class="carousel-control next">Próximo</button>
  </div>
  <div class="scroll-container" id="scrollContainer">
    <div class="calculators-list" id="calculatorsList">
      <!-- Normal Calculator -->
      <form id="calculator" class="calculator">
        <h2>Normal Calculator</h2>
        <label for="operationInput">Math Expression:</label>
        <input type="text" id="operationInput" placeholder="Type an operation" />
        <button type="submit">Calculate</button>
        <div class="result" id="normalResultText"></div>
      </form>
      <!-- Rule of Three -->
      <form id="ruleOfThreeCalculator" class="calculator">
        <h2>Rule of Three</h2>
        <label>A:</label>
        <input type="number" id="inputA" />
        <label>B:</label>
        <input type="number" id="inputB" />
        <label>C:</label>
        <input type="number" id="inputC" />
        <label>X:</label>
        <input type="text" id="inputX" disabled />
        <button type="submit">Calculate</button>
        <div class="result" id="ruleOfThreeResultText"></div>
      </form>
      <!-- Leverage -->
      <form id="leverageCalculator" class="calculator">
        <h2>Leverage Calculator</h2>
        <label>Leverage:</label>
        <input type="number" id="leverage" />
        <label>Percentage Earned (%):</label>
        <input type="number" id="percentage" />
        <button type="submit">Calculate</button>
        <div class="result" id="leveragedProfitResultText"></div>
      </form>
      <!-- Profit Percentage -->
      <form id="profitCalculator" class="calculator">
        <h2>Profit Percentage Calculator</h2>
        <label>Lot Size ($):</label>
        <input type="number" id="lotSize" />
        <label>Profit Amount ($):</label>
        <input type="number" id="profit" />
        <button type="submit">Calculate</button>
        <div class="result" id="profitResultText"></div>
      </form>
      <!-- Compound Interest -->
      <form id="compoundInterestCalculator" class="calculator">
        <h2>Compound Interest Calculator</h2>
        <label>Initial Investment:</label>
        <input type="number" id="initialInvestment" />
        <label>Monthly Contribution:</label>
        <input type="number" id="contribution" />
        <label>Rate (%):</label>
        <input type="number" id="rate" />
        <label>Period (Months):</label>
        <input type="number" id="period" />
        <button type="submit">Calculate</button>
        <div class="result" id="compoundInterestResultText"></div>
      </form>
      <!-- B3 Calculator -->
      <form id="b3Calculator" class="calculator">
        <h2>Calculadora B3</h2>
        <label>Preço de compra:</label>
        <input type="number" id="b3_preco_compra" />
        <label>Preço de venda:</label>
        <input type="number" id="b3_preco_venda" />
        <label>Quantidade:</label>
        <input type="number" id="b3_qtd" />
        <label>Corretagem:</label>
        <input type="number" id="b3_corretagem" />
        <button type="submit">Calcular</button>
        <div class="result" id="b3ResultText"></div>
      </form>
    </div>
  </div>
  <script src="https://unpkg.com/mathjs@11.8.0/lib/browser/math.js"></script>
  <script>
    // Normal Calculator
    document.getElementById('calculator').addEventListener('submit', function(e){
      e.preventDefault();
      const expr = document.getElementById('operationInput').value.trim();
      const resultDiv = document.getElementById('normalResultText');
      if(expr){
        try{
          const result = math.evaluate(expr);
          resultDiv.textContent = `Result: ${result}`;
        }catch{
          resultDiv.textContent = 'Invalid Expression!';
        }
      } else {
        resultDiv.textContent = 'Please enter a valid expression.';
      }
    });
    // Rule of Three
    document.getElementById('ruleOfThreeCalculator').addEventListener('submit', function(e){
      e.preventDefault();
      const A = parseFloat(document.getElementById('inputA').value);
      const B = parseFloat(document.getElementById('inputB').value);
      const C = parseFloat(document.getElementById('inputC').value);
      const resultDiv = document.getElementById('ruleOfThreeResultText');
      const inputX = document.getElementById('inputX');
      if (!isNaN(A) && !isNaN(B) && !isNaN(C) && A !== 0) {
        const X = (B * C) / A;
        inputX.value = X.toFixed(2);
        resultDiv.textContent = `X = ${X.toFixed(2)}`;
      } else {
        resultDiv.textContent = 'Please fill all fields.';
        inputX.value = '';
      }
    });
    // Leverage
    document.getElementById('leverageCalculator').addEventListener('submit', function(e){
      e.preventDefault();
      const leverage = parseFloat(document.getElementById('leverage').value);
      const percentage = parseFloat(document.getElementById('percentage').value);
      const resultDiv = document.getElementById('leveragedProfitResultText');
      if (!isNaN(leverage) && !isNaN(percentage)) {
        const result = leverage * percentage;
        resultDiv.textContent = `Leverage Profit: ${result.toFixed(2)}`;
      } else {
        resultDiv.textContent = 'Please fill all fields.';
      }
    });
    // Profit percentage
    document.getElementById('profitCalculator').addEventListener('submit', function(e){
      e.preventDefault();
      const lotSize = parseFloat(document.getElementById('lotSize').value);
      const profit = parseFloat(document.getElementById('profit').value);
      const resultDiv = document.getElementById('profitResultText');
      if (!isNaN(lotSize) && !isNaN(profit) && lotSize !== 0) {
        const result = (profit / lotSize) * 100;
        resultDiv.textContent = `Profit Percentage: ${result.toFixed(2)}%`;
      } else {
        resultDiv.textContent = 'Please fill all fields.';
      }
    });
    // Compound interest
    document.getElementById('compoundInterestCalculator').addEventListener('submit', function(e){
      e.preventDefault();
      const initialInvestment = parseFloat(document.getElementById('initialInvestment').value);
      const contribution = parseFloat(document.getElementById('contribution').value);
      const rate = parseFloat(document.getElementById('rate').value) / 100;
      const period = parseInt(document.getElementById('period').value);
      const resultDiv = document.getElementById('compoundInterestResultText');
      if (!isNaN(initialInvestment) && !isNaN(contribution) && !isNaN(rate) && !isNaN(period)) {
        let finalAmount = initialInvestment * Math.pow(1 + rate, period);
        for(let i = 1; i <= period; i++) {
          finalAmount += contribution * Math.pow(1 + rate, period - i);
        }
        resultDiv.textContent = `Final Amount: $${finalAmount.toFixed(2)}`;
      } else {
        resultDiv.textContent = 'Please fill all fields.';
      }
    });
    // B3
    document.getElementById('b3Calculator').addEventListener('submit', function(e){
      e.preventDefault();
      const precoCompra = parseFloat(document.getElementById('b3_preco_compra').value);
      const precoVenda = parseFloat(document.getElementById('b3_preco_venda').value);
      const qtd = parseFloat(document.getElementById('b3_qtd').value);
      const corretagem = parseFloat(document.getElementById('b3_corretagem').value);
      const resultDiv = document.getElementById('b3ResultText');
      if (!isNaN(precoCompra) && !isNaN(precoVenda) && !isNaN(qtd) && !isNaN(corretagem)) {
        const totalCompra = precoCompra * qtd;
        const totalVenda = precoVenda * qtd;
        const imposto = totalVenda * 0.0003;
        const lucro = totalVenda - totalCompra - corretagem - imposto;
        resultDiv.textContent = `Lucro líquido: R$ ${lucro.toFixed(2)} (IRRF: R$ ${imposto.toFixed(2)})`;
      } else {
        resultDiv.textContent = 'Preencha todos os campos.';
      }
    });

    // --------- Scroll/Center logic ---------
    const forms = Array.from(document.querySelectorAll('.calculator'));
    let selectedIndex = 0;
    function centerCalculator(idx){
      const calculatorsList = document.getElementById('calculatorsList');
      const scrollContainer = document.getElementById('scrollContainer');
      const calculator = forms[idx];
      const calculatorRect = calculator.getBoundingClientRect();
      const containerRect = scrollContainer.getBoundingClientRect();
      const scrollLeft = calculator.offsetLeft - calculatorsList.offsetLeft - (containerRect.width / 2 - calculatorRect.width / 2);
      scrollContainer.scrollTo({
        left: scrollLeft,
        behavior: 'smooth'
      });
    }
    document.querySelector('.carousel-control.prev').addEventListener('click', function(){
      selectedIndex = selectedIndex > 0 ? selectedIndex - 1 : forms.length - 1;
      centerCalculator(selectedIndex);
    });
    document.querySelector('.carousel-control.next').addEventListener('click', function(){
      selectedIndex = selectedIndex < forms.length - 1 ? selectedIndex + 1 : 0;
      centerCalculator(selectedIndex);
    });
  </script>
</body>
</html>
